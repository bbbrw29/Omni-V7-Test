<!DOCTYPE html>
<html lang="my">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>VIP STEALTH PRO - MODERN DESIGN</title>
<style>
:root { --bg: #0d1117; --card: #161b22; --border: #30363d; --text: #c9d1d9; --blue: #58a6ff; --gold: #ffd700; --silver: #8b949e; --green: #238636; --red: #f85149; }
body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 8px; margin: 0; }
.container { max-width: 420px; margin: auto; }
.panel { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 10px; margin-bottom: 8px; }
h4 { margin: 0 0 5px 0; color: var(--gold); border-bottom: 1px solid var(--border); padding-bottom: 5px; font-size: 10px; }

.recent-wrapper { 
    display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 10px; padding: 6px;
    background: rgba(0,0,0,0.3); border-radius: 8px;
}
.recent-label { font-size: 9px; color: var(--silver); text-transform: uppercase; font-weight: bold; }
.num-circle { 
    width: 22px; height: 22px; display: flex; align-items: center; justify-content: center; 
    border-radius: 50%; background: #21262d; border: 1px solid var(--border);
    font-size: 12px; font-weight: bold; color: var(--text);
}
.num-circle.latest { border-color: var(--blue); color: var(--blue); box-shadow: 0 0 5px rgba(88, 166, 255, 0.4); }

.live-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
.live-card { background: #000; padding: 4px 6px; border-radius: 6px; border: 1px solid var(--border); position: relative; }
.current-lock { border: 1.5px solid var(--gold) !important; }
.unlocked-card { border: 1px solid #444; opacity: 0.7; }

.status-tag { font-size: 8px; font-weight: bold; padding: 1px 3px; border-radius: 3px; margin-right: 4px; }
.tag-locked { background: var(--gold); color: #000; }
.tag-unlocked { background: #444; color: var(--silver); }

.live-info { display: flex; justify-content: space-between; align-items: center; font-size: 9px; margin-bottom: 3px; }
.live-dots { display: flex; gap: 1.5px; }
.dot { flex: 1; height: 3px; border-radius: 1px; background: #222; }

.history-container { height: 280px; overflow-y: auto; background: #000; border: 1px solid #222; border-radius: 8px; }
table { width: 100%; border-collapse: collapse; font-size: 11px; }
th { position: sticky; top: 0; background: #111; padding: 8px; font-size: 10px; color: var(--gold); border-bottom: 1px solid #333; }
td { padding: 8px 4px; border-bottom: 1px solid #111; text-align: center; }

.copy-btn { background: var(--blue); color: white; border: none; padding: 5px 10px; border-radius: 4px; font-size: 10px; cursor: pointer; float: right; margin-bottom: 5px; }

/* Keyboard Layout Update */
.numpad-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; }
.num-btn { height: 45px; background: #21262d; border: 1px solid var(--border); color: #fff; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; }
.undo-btn { background: #30363d !important; color: var(--gold) !important; font-size: 12px !important; }
</style>
</head>
<body>

<div class="container">
    <div class="panel" style="text-align: center; background: #000; border: 2px solid var(--gold); border-radius: 15px; padding: 15px 10px;">
        <div id="predDisplay" style="font-size: 45px; font-weight: bold; color: var(--blue);">-</div>
        <div id="statusLabel" style="font-size:10px; color:var(--gold); margin-bottom: 8px;">LOCKED CAT: -</div>
        <div class="step-grid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 3px;">
            <script>for(let i=0;i<8;i++) document.write('<div class="step-box" style="height:18px; border:1px solid #333; border-radius:3px; display:flex; align-items:center; justify-content:center; font-size:9px; background:#111;" id="step-'+i+'">'+(i+1)+'</div>');</script>
        </div>
        
        <div class="recent-wrapper">
            <span class="recent-label">History:</span>
            <div id="recentDisplay" style="display: flex; gap: 5px;">
                <div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div>
            </div>
        </div>
    </div>

    <div class="panel">
        <h4>LIVE ANALYSIS</h4>
        <div id="liveMonitor" class="live-grid"></div>
    </div>

    <div class="panel">
        <div class="numpad-grid">
            <button class="num-btn" onclick="handleInput(1)">1</button>
            <button class="num-btn" onclick="handleInput(2)">2</button>
            <button class="num-btn" onclick="handleInput(3)">3</button>
            <button class="num-btn" onclick="handleInput(4)">4</button>
            <button class="num-btn" onclick="handleInput(5)">5</button>
            <button class="num-btn" onclick="handleInput(6)">6</button>
            <button class="num-btn" onclick="handleInput(7)">7</button>
            <button class="num-btn" onclick="handleInput(8)">8</button>
            <button class="num-btn" onclick="handleInput(9)">9</button>
            <button class="num-btn" onclick="handleInput(0)">0</button>
            <button class="num-btn undo-btn" style="grid-column: span 5; height: 40px;" onclick="undoInput()">UNDO</button>
        </div>
        <button onclick="resetData()" style="width:100%; background:var(--red); color:white; border:none; padding:12px; border-radius:8px; font-size:12px; font-weight:bold; margin-top:10px;">RESET ALL</button>
    </div>

    <div class="panel">
        <button class="copy-btn" onclick="copyHistory()">COPY HISTORY</button>
        <h4>HISTORY LOG</h4>
        <div class="history-container">
            <table id="historyTable">
                <thead><tr><th>S/N</th><th>CAT</th><th>RESULT</th><th>STATUS</th></tr></thead>
                <tbody id="historyBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
const myPatterns = { "00": "SBSSSSBS", "01": "SBBSBSBB", "02": "BBSBSSSS", "03": "BSBSSSBB", "04": "SSBBBBSB", "05": "BSSBBSSS", "06": "SBBBBBSB", "07": "BBBBBBSS", "08": "BSSSBBBB", "09": "SSSSSSSB", "10": "BSBSBBBS", "11": "SBBSSSBS", "12": "BSSSBSSS", "13": "BBSBSSBB", "14": "BBBSBBBS", "15": "SBSBSBSB", "16": "SBSSBSBS", "17": "BSSBBBBB", "18": "BBSSSBSB", "19": "BSSBBBBB", "20": "BBBBBBBB", "21": "BBBSSSSB", "22": "SBSSSSSS", "23": "BSBSBBSB", "24": "BSBSBSBB", "25": "BBSBBSSB", "26": "SBSBSSBB", "27": "SSBBBBSB", "28": "SBBBSBSB", "29": "SBSBSBSB", "30": "SSSBSBSS", "31": "SSSBBBBS", "32": "BBBBBBBS", "33": "BSSBSSBS", "34": "BBBSSBSB", "35": "BBSSBSSS", "36": "SSBBSBBB", "37": "BSBBSBSB", "38": "BSBBBSBB", "39": "SSSBBSSB", "40": "BBBSSSSB", "41": "SBSSBSSS", "42": "BBSBSBBB", "43": "BBSBBBSB", "44": "SSBBSSBB", "45": "SBBSBBSB", "46": "SSSBBSBS", "47": "SBBSBBBB", "48": "BSSSSSBB", "49": "BBBSSBBB", "50": "BSSBBBBS", "51": "BBSBSBBB", "52": "SSBBSSSS", "53": "SSBSBBSS", "54": "SBBBSSSS", "55": "SSSSSSSS", "56": "BBBSBBBS", "57": "BBBSSSBB", "58": "SBSBSSSB", "59": "BBSBSBBB", "60": "SBBSBBSB", "61": "SBBSBSSB", "62": "BBBBBBSS", "63": "SBSSBSBB", "64": "BBSSSSBB", "65": "BSBBBSBS", "66": "BSBSSBSB", "67": "BSSBSBSS", "68": "BBBBSBBS", "69": "BBSSSBSS", "70": "SSSBBSSB", "71": "BBBBSSBB", "72": "BSBBBSSB", "73": "BBBBBSBS", "74": "BBBSBSSB", "75": "SSBBBSBS", "76": "SSSSSBBS", "77": "SSBBBSBS", "78": "BBBBBBSS", "79": "BSBBBSSS", "80": "BBSSBBSS", "81": "BSSSBSBS", "82": "BBBSBSSB", "83": "BSSSSBSS", "84": "BBSBBSBB", "85": "SSBBBSBB", "86": "BBSBSSBB", "87": "BBSSBSSS", "88": "SSBSSBBS", "89": "BBSSBSBB", "90": "SBBSSSSS", "91": "SSBBSBSB", "92": "BSBBBBSB", "93": "BSSSBBBB", "94": "BSSBSBBS", "95": "SSSSSBSS", "96": "BSBSSSBB", "97": "SBSBBSSB", "98": "BBSBSSBB", "99": "BBSSSSBB" };

// LocalStorage á€™á€¾ Data á€™á€»á€¬á€¸á€€á€­á€¯ á€•á€¼á€”á€ºá€á€±á€«á€ºá€šá€°á€á€¼á€„á€ºá€¸
let rawInputs = JSON.parse(localStorage.getItem('rawInputs')) || [];
let activeTracks = JSON.parse(localStorage.getItem('activeTracks')) || [];
let historyLog = JSON.parse(localStorage.getItem('historyLog')) || [];
let lockedTrackId = localStorage.getItem('lockedTrackId') || null;

function saveData() {
    localStorage.setItem('rawInputs', JSON.stringify(rawInputs));
    localStorage.setItem('activeTracks', JSON.stringify(activeTracks));
    localStorage.setItem('historyLog', JSON.stringify(historyLog));
    localStorage.setItem('lockedTrackId', lockedTrackId);
}

function undoInput() {
    if (rawInputs.length === 0) return;
    rawInputs.pop();
    activeTracks.forEach(t => { if (t.results.length > 0) t.results.pop(); });
    activeTracks = activeTracks.filter(t => t.results.length > 0 || t.id == lockedTrackId);
    saveData();
    renderUI();
}

function handleInput(num) {
    const bs = num >= 5 ? "B" : "S";
    activeTracks.forEach(t => { if (t.results.length < 8) t.results.push(bs === t.pattern[t.results.length] ? "âœ…" : "âŒ"); });
    let lockCreated = false;
    if (lockedTrackId) {
        let locked = activeTracks.find(t => t.id == lockedTrackId);
        if (locked && (locked.results[locked.results.length-1] === "âœ…" || locked.results.length === 8)) {
            const p1 = rawInputs[rawInputs.length - 1];
            lockedTrackId = null;
            createTrack(p1, num, true);
            lockCreated = true;
        }
    }
    if (rawInputs.length > 0 && !lockCreated) createTrack(rawInputs[rawInputs.length - 1], num, false);
    rawInputs.push(num);
    for (let i = activeTracks.length - 1; i >= 0; i--) {
        if (activeTracks[i].results.length === 8) historyLog.unshift(activeTracks.splice(i, 1)[0]);
    }
    saveData();
    renderUI();
}

function createTrack(n1, n2, isLock) {
    const cat = n1.toString() + n2.toString();
    if (myPatterns[cat]) {
        let newT = { id: Date.now() + Math.random(), digit: cat, pattern: myPatterns[cat], results: [], wasLocked: isLock };
        activeTracks.push(newT);
        if (isLock || !lockedTrackId) lockedTrackId = newT.id;
    }
}

function renderUI() {
    const locked = activeTracks.find(t => t.id == lockedTrackId);
    const stepIdx = locked ? locked.results.length : -1;
    document.getElementById('predDisplay').innerText = (locked && locked.pattern[stepIdx]) ? locked.pattern[stepIdx] : "-";
    document.getElementById('statusLabel').innerText = locked ? `LOCKED: ${locked.digit}` : "WAITING...";

    const last5 = rawInputs.slice(-5);
    const recentHTML = [0,1,2,3,4].map(i => {
        const val = last5[i] !== undefined ? last5[i] : "-";
        const isLatest = (i === last5.length - 1 && val !== "-");
        return `<div class="num-circle ${isLatest ? 'latest' : ''}">${val}</div>`;
    }).join('');
    document.getElementById('recentDisplay').innerHTML = recentHTML;

    for(let i=0; i<8; i++) {
        let el = document.getElementById(`step-${i}`);
        let res = locked ? locked.results[i] : "";
        el.style.background = res==='âœ…'?'var(--green)':(res==='âŒ'?'var(--red)':'#111');
        el.style.border = (i===stepIdx) ? '1.5px solid var(--gold)' : '1px solid #333';
        el.innerText = res || (i+1);
    }

    document.getElementById('liveMonitor').innerHTML = activeTracks.map(t => {
        const isLock = t.id == lockedTrackId;
        const isUnl = t.wasLocked && !isLock;
        return `
        <div class="live-card ${isLock ? 'current-lock' : (isUnl ? 'unlocked-card' : '')}">
            <div class="live-info">
                <span><span class="status-tag ${isLock ? 'tag-locked' : 'tag-unlocked'}">${isLock ? 'ðŸ”’' : (isUnl ? 'ðŸ”“' : 'A')}</span>${t.digit}</span>
                <span style="color:var(--gold)">${t.pattern[t.results.length] || 'END'}</span>
            </div>
            <div class="live-dots">${t.pattern.split('').map((p, i) => `<div class="dot" style="background:${t.results[i] === 'âœ…' ? 'var(--green)' : (t.results[i] === 'âŒ' ? 'var(--red)' : '#222')}"></div>`).join('')}</div>
        </div>`;
    }).join('');

    document.getElementById('historyBody').innerHTML = historyLog.slice(0, 100).map((h, index) => {
        const icon = h.wasLocked ? '<span style="color:var(--gold)">ðŸ”’</span>' : '<span style="color:var(--silver); opacity:0.5;">ðŸ”“</span>';
        return `<tr><td>${historyLog.length - index}</td><td style="text-align:left; padding-left:10px;">${icon} ${h.digit}</td><td>${h.results.join('')}</td><td style="color:${h.results.includes('âœ…')?'var(--green)':'var(--red)'}; font-weight:bold;">${h.results.includes('âœ…')?'WIN':'LOSS'}</td></tr>`;
    }).join('');
}

function copyHistory() {
    let text = "S/N | CAT | RESULT | STATUS\n";
    historyLog.forEach((h, i) => { text += `${historyLog.length - i} | ${h.digit} | ${h.results.join('')} | ${h.results.includes('âœ…') ? 'WIN' : 'LOSS'}\n`; });
    const el = document.createElement('textarea'); el.value = text; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el);
    alert("Copied!");
}

function resetData() { 
    if(confirm("RESET ALL?")) { 
        rawInputs=[]; activeTracks=[]; historyLog=[]; lockedTrackId=null; 
        localStorage.clear();
        renderUI(); 
    } 
}
renderUI();
</script>
</body>
</html>
