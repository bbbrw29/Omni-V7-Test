<!DOCTYPE html>
<html lang="my">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>VIP STEALTH PRO - EYE CARE DESIGN</title>
<style>
:root { --bg: #0d1117; --card: #161b22; --border: #30363d; --text: #c9d1d9; --blue: #58a6ff; --gold: #ffd700; --silver: #8b949e; --green: #238636; --red: #f85149; --mint: #2ecc71; }
body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 8px; margin: 0; }
.container { max-width: 420px; margin: auto; }
.panel { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 10px; margin-bottom: 8px; }
h4 { margin: 0 0 5px 0; color: var(--gold); border-bottom: 1px solid var(--border); padding-bottom: 5px; font-size: 10px; }

.recent-wrapper { 
    display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 10px; padding: 6px;
    background: rgba(0,0,0,0.3); border-radius: 8px;
}
.recent-label { font-size: 9px; color: var(--silver); text-transform: uppercase; font-weight: bold; }

.num-circle { 
    width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; 
    border-radius: 50%; background: #21262d; border: 1px solid var(--border);
    font-size: 13px; font-weight: bold; color: var(--text);
    transition: all 0.3s ease;
}

.num-circle.latest { 
    border-color: var(--mint) !important; 
    color: white !important; 
    background: #1b4d3e; 
    box-shadow: 0 0 12px rgba(46, 204, 113, 0.6); 
    animation: soothing-glow 0.6s ease-out;
}

@keyframes soothing-glow {
    0% { transform: scale(1.15); background: var(--mint); box-shadow: 0 0 20px var(--mint); }
    100% { transform: scale(1); background: #1b4d3e; }
}

.live-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
.live-card { padding: 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.15); position: relative; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }

/* Locked Card ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ ·Ä°·Äñ·Äº·Ä∞·Äõ·Ä±·Ä¨·ÄÑ·Ä∫ Glow ·Äë·Ää·Ä∑·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ */
.current-lock { border: 2.5px solid #ffffff !important; box-shadow: 0 0 15px rgba(255,255,255,0.4); z-index: 1; transform: scale(1.02); }
.unlocked-card { opacity: 0.4; filter: saturate(0.5); }

.status-tag { font-size: 8px; font-weight: bold; padding: 2px 4px; border-radius: 3px; margin-right: 4px; background: rgba(0,0,0,0.6); color: #fff; }

.live-info { display: flex; justify-content: space-between; align-items: center; font-size: 12px; margin-bottom: 6px; color: #fff; font-weight: 900; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
.live-dots { display: flex; gap: 2px; }
.dot { flex: 1; height: 5px; border-radius: 1.5px; background: rgba(255,255,255,0.2); border: 0.5px solid rgba(0,0,0,0.1); }

.history-container { height: 280px; overflow-y: auto; background: #000; border: 1px solid #222; border-radius: 8px; }
table { width: 100%; border-collapse: collapse; font-size: 11px; }
th { position: sticky; top: 0; background: #111; padding: 8px; font-size: 10px; color: var(--gold); border-bottom: 1px solid #333; }
td { padding: 8px 4px; border-bottom: 1px solid #111; text-align: center; }

.copy-btn { background: var(--blue); color: white; border: none; padding: 5px 10px; border-radius: 4px; font-size: 10px; cursor: pointer; float: right; margin-bottom: 5px; }

.numpad-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; }
.num-btn { height: 45px; background: #21262d; border: 1px solid var(--border); color: #fff; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; }
.undo-btn { background: #30363d !important; color: var(--gold) !important; font-size: 12px !important; }
</style>
</head>
<body>

<div class="container">
    <div class="panel" style="text-align: center; background: #000; border: 2px solid var(--gold); border-radius: 15px; padding: 15px 10px;">
        <div id="predDisplay" style="font-size: 45px; font-weight: bold; color: var(--blue);">-</div>
        <div id="statusLabel" style="font-size:10px; color:var(--gold); margin-bottom: 8px;">LOCKED CAT: -</div>
        <div class="step-grid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 3px;">
            <script>for(let i=0;i<8;i++) document.write('<div class="step-box" style="height:18px; border:1px solid #333; border-radius:3px; display:flex; align-items:center; justify-content:center; font-size:9px; background:#111;" id="step-'+i+'">'+(i+1)+'</div>');</script>
        </div>
        
        <div class="recent-wrapper">
            <span class="recent-label">History:</span>
            <div id="recentDisplay" style="display: flex; gap: 6px;">
                <div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div>
            </div>
        </div>
    </div>

    <div class="panel">
        <h4>LIVE ANALYSIS</h4>
        <div id="liveMonitor" class="live-grid"></div>
    </div>

    <div class="panel">
        <div class="numpad-grid">
            <button class="num-btn" onclick="handleInput(1)">1</button>
            <button class="num-btn" onclick="handleInput(2)">2</button>
            <button class="num-btn" onclick="handleInput(3)">3</button>
            <button class="num-btn" onclick="handleInput(4)">4</button>
            <button class="num-btn" onclick="handleInput(5)">5</button>
            <button class="num-btn" onclick="handleInput(6)">6</button>
            <button class="num-btn" onclick="handleInput(7)">7</button>
            <button class="num-btn" onclick="handleInput(8)">8</button>
            <button class="num-btn" onclick="handleInput(9)">9</button>
            <button class="num-btn" onclick="handleInput(0)">0</button>
            <button class="num-btn undo-btn" style="grid-column: span 5; height: 40px;" onclick="undoInput()">UNDO</button>
        </div>
        <button onclick="resetData()" style="width:100%; background:var(--red); color:white; border:none; padding:12px; border-radius:8px; font-size:12px; font-weight:bold; margin-top:10px;">RESET ALL</button>
    </div>

    <div class="panel">
        <button class="copy-btn" onclick="copyHistory()">COPY HISTORY</button>
        <h4>HISTORY LOG</h4>
        <div class="history-container">
            <table id="historyTable">
                <thead><tr><th>S/N</th><th>CAT</th><th>RESULT</th><th>STATUS</th></tr></thead>
                <tbody id="historyBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
const myPatterns = { "00": "SBSSSSBS", "01": "SBBSBSBB", "02": "BBSBSSSS", "03": "BSBSSSBB", "04": "SSBBBBSB", "05": "BSSBBSSS", "06": "SBBBBBSB", "07": "BBBBBBSS", "08": "BSSSBBBB", "09": "SSSSSSSB", "10": "BSBSBBBS", "11": "SBBSSSBS", "12": "BSSSBSSS", "13": "BBSBSSBB", "14": "BBBSBBBS", "15": "SBSBSBSB", "16": "SBSSBSBS", "17": "BSSBBBBB", "18": "BBSSSBSB", "19": "BSSBBBBB", "20": "BBBBBBBB", "21": "BBBSSSSB", "22": "SBSSSSSS", "23": "BSBSBBSB", "24": "BSBSBSBB", "25": "BBSBBSSB", "26": "SBSBSSBB", "27": "SSBBBBSB", "28": "SBBBSBSB", "29": "SBSBSBSB", "30": "SSSBSBSS", "31": "SSSBBBBS", "32": "BBBBBBBS", "33": "BSSBSSBS", "34": "BBBSSBSB", "35": "BBSSBSSS", "36": "SSBBSBBB", "37": "BSBBSBSB", "38": "BSBBBSBB", "39": "SSSBBSSB", "40": "BBBSSSSB", "41": "SBSSBSSS", "42": "BBSBSBBB", "43": "BBSBBBSB", "44": "SSBBSSBB", "45": "SBBSBBSB", "46": "SSSBBSBS", "47": "SBBSBBBB", "48": "BSSSSSBB", "49": "BBBSSBBB", "50": "BSSBBBBS", "51": "BBSBSBBB", "52": "SSBBSSSS", "53": "SSBSBBSS", "54": "SBBBSSSS", "55": "SSSSSSSS", "56": "BBBSBBBS", "57": "BBBSSSBB", "58": "SBSBSSSB", "59": "BBSBSBBB", "60": "SBBSBBSB", "61": "SBBSBSSB", "62": "BBBBBBSS", "63": "SBSSBSBB", "64": "BBSSSSBB", "65": "BSBBBSBS", "66": "BSBSSBSB", "67": "BSSBSBSS", "68": "BBBBSBBS", "69": "BBSSSBSS", "70": "SSSBBSSB", "71": "BBBBSSBB", "72": "BSBBBSSB", "73": "BBBBBSBS", "74": "BBBSBSSB", "75": "SSBBBSBS", "76": "SSSSSBBS", "77": "SSBBBSBS", "78": "BBBBBBSS", "79": "BSBBBSSS", "80": "BBSSBBSS", "81": "BSSSBSBS", "82": "BBBSBSSB", "83": "BSSSSBSS", "84": "BBSBBSBB", "85": "SSBBBSBB", "86": "BBSBSSBB", "87": "BBSSBSSS", "88": "SSBSSBBS", "89": "BBSSBSBB", "90": "SBBSSSSS", "91": "SSBBSBSB", "92": "BSBBBBSB", "93": "BSSSBBBB", "94": "BSSBSBBS", "95": "SSSSSBSS", "96": "BSBSSSBB", "97": "SBSBBSSB", "98": "BBSBSSBB", "99": "BBSSSSBB" };

const cardColors = ["#1e90ff", "#00ff7f", "#ff1493", "#ff8c00", "#ffff00", "#00ffff", "#ff4500", "#da70d6"];

let rawInputs = JSON.parse(localStorage.getItem('rawInputs')) || [];
let activeTracks = JSON.parse(localStorage.getItem('activeTracks')) || [];
let historyLog = JSON.parse(localStorage.getItem('historyLog')) || [];
let lockedTrackId = localStorage.getItem('lockedTrackId') || null;
// ·Ä°·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Ä°·ÄÖ·ÄÆ·Ä°·ÄÖ·Äâ·Ä∫·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ global counter
let trackCounter = parseInt(localStorage.getItem('trackCounter')) || 0;

function saveData() {
    localStorage.setItem('rawInputs', JSON.stringify(rawInputs));
    localStorage.setItem('activeTracks', JSON.stringify(activeTracks));
    localStorage.setItem('historyLog', JSON.stringify(historyLog));
    localStorage.setItem('lockedTrackId', lockedTrackId);
    localStorage.setItem('trackCounter', trackCounter);
}

function handleInput(num) {
    const bs = num >= 5 ? "B" : "S";
    activeTracks.forEach(t => { if (t.results.length < 8) t.results.push(bs === t.pattern[t.results.length] ? "‚úÖ" : "‚ùå"); });
    let lockCreated = false;
    if (lockedTrackId) {
        let locked = activeTracks.find(t => t.id == lockedTrackId);
        if (locked && (locked.results[locked.results.length-1] === "‚úÖ" || locked.results.length === 8)) {
            const p1 = rawInputs[rawInputs.length - 1];
            lockedTrackId = null;
            createTrack(p1, num, true);
            lockCreated = true;
        }
    }
    if (rawInputs.length > 0 && !lockCreated) createTrack(rawInputs[rawInputs.length - 1], num, false);
    rawInputs.push(num);
    for (let i = activeTracks.length - 1; i >= 0; i--) {
        if (activeTracks[i].results.length === 8) historyLog.unshift(activeTracks.splice(i, 1)[0]);
    }
    saveData();
    renderUI();
}

function createTrack(n1, n2, isLock) {
    const cat = n1.toString() + n2.toString();
    if (myPatterns[cat]) {
        // trackCounter ·ÄÄ·Ä≠·ÄØ·Äû·ÄØ·Ä∂·Ä∏·Äï·Äº·ÄÆ·Ä∏ ·Ä°·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ (·Äî·Ä∂·Äï·Ä´·Äê·Ä∫·Äê·Ä∞·Äõ·ÄÑ·Ä∫·Äê·Ä±·Ä¨·ÄÑ·Ä∫ ·Ä°·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äê·Ä∞·ÄÖ·Ä±·Äõ·Äî·Ä∫)
        const colorIdx = trackCounter % 8;
        let newT = { 
            id: Date.now() + Math.random(), 
            digit: cat, 
            pattern: myPatterns[cat], 
            results: [], 
            wasLocked: isLock,
            color: cardColors[colorIdx] 
        };
        activeTracks.push(newT);
        trackCounter++; // counter ·Äê·Ä≠·ÄØ·Ä∏·Äï·Ä±·Ä∏·Äõ·Äî·Ä∫
        if (isLock || !lockedTrackId) lockedTrackId = newT.id;
    }
}

function renderUI() {
    const locked = activeTracks.find(t => t.id == lockedTrackId);
    const stepIdx = locked ? locked.results.length : -1;
    document.getElementById('predDisplay').innerText = (locked && locked.pattern[stepIdx]) ? locked.pattern[stepIdx] : "-";
    document.getElementById('statusLabel').innerText = locked ? `LOCKED: ${locked.digit}` : "WAITING...";

    const last5 = rawInputs.slice(-5);
    const recentHTML = [0,1,2,3,4].map(i => {
        const val = last5[i] !== undefined ? last5[i] : "-";
        const isLatest = (val !== "-" && i === last5.length - 1);
        return `<div class="num-circle ${isLatest ? 'latest' : ''}">${val}</div>`;
    }).join('');
    document.getElementById('recentDisplay').innerHTML = recentHTML;

    for(let i=0; i<8; i++) {
        let el = document.getElementById(`step-${i}`);
        let res = locked ? locked.results[i] : "";
        el.style.background = res==='‚úÖ'?'var(--green)':(res==='‚ùå'?'var(--red)':'#111');
        el.style.border = (i===stepIdx) ? '1.5px solid var(--gold)' : '1px solid #333';
        el.innerText = res || (i+1);
    }

    document.getElementById('liveMonitor').innerHTML = activeTracks.map(t => {
        const isLock = t.id == lockedTrackId;
        const isUnl = t.wasLocked && !isLock;
        return `
        <div class="live-card ${isLock ? 'current-lock' : (isUnl ? 'unlocked-card' : '')}" style="background-color: ${t.color || '#161b22'}">
            <div class="live-info">
                <span><span class="status-tag">${isLock ? 'üîí' : (isUnl ? 'üîì' : 'A')}</span>${t.digit}</span>
                <span style="color:#ffffff; font-size:14px; text-shadow: 1px 1px 2px #000;">${t.pattern[t.results.length] || 'END'}</span>
            </div>
            <div class="live-dots">${t.pattern.split('').map((p, i) => `<div class="dot" style="background:${t.results[i] === '‚úÖ' ? '#ffffff' : (t.results[i] === '‚ùå' ? '#000000' : 'rgba(255,255,255,0.2)')}"></div>`).join('')}</div>
        </div>`;
    }).join('');

    document.getElementById('historyBody').innerHTML = historyLog.slice(0, 100).map((h, index) => {
        const icon = h.wasLocked ? '<span style="color:var(--gold)">üîí</span>' : '<span style="color:var(--silver); opacity:0.5;">üîì</span>';
        return `<tr><td>${historyLog.length - index}</td><td style="text-align:left; padding-left:10px;">${icon} ${h.digit}</td><td>${h.results.join('')}</td><td style="color:${h.results.includes('‚úÖ')?'var(--green)':'var(--red)'}; font-weight:bold;">${h.results.includes('‚úÖ')?'WIN':'LOSS'}</td></tr>`;
    }).join('');
}

function undoInput() {
    if (rawInputs.length === 0) return;
    rawInputs.pop();
    activeTracks.forEach(t => { if (t.results.length > 0) t.results.pop(); });
    // undo ·Äú·ÄØ·Äï·Ä∫·Äõ·ÄÑ·Ä∫ counter ·Äï·Äº·Äî·Ä∫·Äú·Äª·Äæ·Ä±·Ä¨·Ä∑·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äû·Ä±·Ä¨·Ä∫·Äú·Ää·Ä∫·Ä∏ logic ·Äõ·Äæ·ÄØ·Äï·Ä∫·Äë·ÄΩ·Ä±·Ä∏·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Åç ·Äí·ÄÆ·Äê·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äë·Ä¨·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·ÄÄ ·Äï·Ä≠·ÄØ·ÄÖ·Ä≠·Äê·Ä∫·ÄÅ·Äª·Äõ·Äï·Ä´·Äû·Ää·Ä∫
    activeTracks = activeTracks.filter(t => t.results.length > 0 || t.id == lockedTrackId);
    saveData();
    renderUI();
}

function copyHistory() {
    let text = "S/N | CAT | RESULT | STATUS\n";
    historyLog.forEach((h, i) => { text += `${historyLog.length - i} | ${h.digit} | ${h.results.join('')} | ${h.results.includes('‚úÖ') ? 'WIN' : 'LOSS'}\n`; });
    const el = document.createElement('textarea'); el.value = text; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el);
    alert("Copied!");
}

function resetData() { 
    if(confirm("RESET ALL?")) { 
        rawInputs=[]; activeTracks=[]; historyLog=[]; lockedTrackId=null; trackCounter=0;
        localStorage.clear();
        renderUI(); 
    } 
}
renderUI();
</script>
</body>
</html>
