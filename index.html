<!DOCTYPE html>
<html lang="my">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>VIP STEALTH PRO - SINGLE PRED DESIGN</title>
<style>
:root { --bg: #0d1117; --card: #161b22; --border: #30363d; --text: #c9d1d9; --blue: #58a6ff; --gold: #ffd700; --silver: #8b949e; --green: #238636; --red: #f85149; --mint: #2ecc71; }
body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 8px; margin: 0; overflow-x: hidden; }
.container { max-width: 420px; margin: auto; }
.panel { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 10px; margin-bottom: 8px; }
h4 { margin: 0 0 5px 0; color: var(--gold); border-bottom: 1px solid var(--border); padding-bottom: 5px; font-size: 10px; }

.recent-wrapper { 
    display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 10px; padding: 6px;
    background: rgba(0,0,0,0.3); border-radius: 8px;
}
.recent-label { font-size: 9px; color: var(--silver); text-transform: uppercase; font-weight: bold; }

.num-circle { 
    width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; 
    border-radius: 50%; background: #21262d; border: 1px solid var(--border);
    font-size: 13px; font-weight: bold; color: var(--text);
}

.num-circle.latest { 
    border-color: var(--mint) !important; 
    color: white !important; 
    background: #1b4d3e; 
    box-shadow: 0 0 12px rgba(46, 204, 113, 0.6); 
}

.live-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
.live-card { padding: 8px; border-radius: 8px; border: 1px solid var(--border); background: #1c2128; position: relative; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.5); }
.current-lock { border: 2.5px solid #ffffff !important; box-shadow: 0 0 15px rgba(255,255,255,0.3); z-index: 1; transform: scale(1.02); }
.unlocked-card { opacity: 0.5; filter: grayscale(0.3); }

.status-tag { font-size: 8px; font-weight: bold; padding: 2px 4px; border-radius: 3px; margin-right: 4px; background: rgba(0,0,0,0.6); color: #fff; }
.level-badge { font-size: 9px; background: var(--gold); color: #000; padding: 1px 5px; border-radius: 10px; font-weight: bold; }
.live-info { display: flex; justify-content: space-between; align-items: center; font-size: 11px; margin-bottom: 5px; color: #fff; font-weight: 900; }

.three-layer-monitor { display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; padding: 6px; background: rgba(0,0,0,0.3); border-radius: 6px; border: 1px solid rgba(255,255,255,0.05); }
.cell-stack { display: flex; flex-direction: column; gap: 3px; align-items: center; }
.comp-dot { width: 5px; height: 5px; border-radius: 50%; }
.res-cell { width: 100%; height: 16px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; border-radius: 2px; }

.history-container { height: 280px; overflow-y: auto; background: #000; border: 1px solid #222; border-radius: 8px; }
table { width: 100%; border-collapse: collapse; font-size: 11px; }
th { position: sticky; top: 0; background: #111; padding: 8px; font-size: 10px; color: var(--gold); border-bottom: 1px solid #333; }
td { padding: 8px 4px; border-bottom: 1px solid #111; text-align: center; }

.copy-btn { background: var(--blue); color: white; border: none; padding: 5px 10px; border-radius: 4px; font-size: 10px; cursor: pointer; float: right; margin-bottom: 5px; }
.numpad-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; }
.num-btn { height: 45px; background: #21262d; border: 1px solid var(--border); color: #fff; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; }
.undo-btn { background: #30363d !important; color: var(--gold) !important; font-size: 12px !important; }
</style>
</head>
<body>

<div class="container">
    <div class="panel" style="text-align: center; background: #000; border: 2px solid var(--gold); border-radius: 15px; padding: 15px 10px;">
        <div id="predDisplay" style="font-size: 45px; font-weight: bold; color: var(--blue);">-</div>
        <div id="statusLabel" style="font-size:10px; color:var(--gold); margin-bottom: 8px;">LOCKED CAT: -</div>
        <div class="step-grid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 3px;">
            <script>for(let i=0;i<8;i++) document.write('<div class="step-box" style="height:18px; border:1px solid #333; border-radius:3px; display:flex; align-items:center; justify-content:center; font-size:9px; background:#111;" id="step-'+i+'">'+(i+1)+'</div>');</script>
        </div>
        
        <div class="recent-wrapper">
            <span class="recent-label">History:</span>
            <div id="recentDisplay" style="display: flex; gap: 6px;">
                <div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div><div class="num-circle">-</div>
            </div>
        </div>
    </div>

    <div class="panel">
        <h4>LIVE ANALYSIS</h4>
        <div id="liveMonitor" class="live-grid"></div>
    </div>

    <div class="panel">
        <div class="numpad-grid">
            <script>for(let i=1; i<=9; i++) document.write(`<button class="num-btn" onclick="handleInput(${i})">${i}</button>`);</script>
            <button class="num-btn" onclick="handleInput(0)">0</button>
            <button class="num-btn undo-btn" style="grid-column: span 5; height: 40px;" onclick="undoInput()">UNDO</button>
        </div>
        <button onclick="resetData()" style="width:100%; background:var(--red); color:white; border:none; padding:12px; border-radius:8px; font-size:12px; font-weight:bold; margin-top:10px;">RESET ALL</button>
    </div>

    <div class="panel">
        <button class="copy-btn" onclick="copyHistory()">COPY HISTORY</button>
        <h4>HISTORY LOG</h4>
        <div class="history-container">
            <table id="historyTable">
                <thead><tr><th>S/N</th><th>CAT</th><th>RESULT</th><th>STATUS</th></tr></thead>
                <tbody id="historyBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
const myPatterns = { "00": "SBSSSSBS", "01": "SBBSBSBB", "02": "BBSBSSSS", "03": "BSBSSSBB", "04": "SSBBBBSB", "05": "BSSBBSSS", "06": "SBBBBBSB", "07": "BBBBBBSS", "08": "BSSSBBBB", "09": "SSSSSSSB", "10": "BSBSBBBS", "11": "SBBSSSBS", "12": "BSSSBSSS", "13": "BBSBSSBB", "14": "BBBSBBBS", "15": "SBSBSBSB", "16": "SBSSBSBS", "17": "BSSBBBBB", "18": "BBSSSBSB", "19": "BSSBBBBB", "20": "BBBBBBBB", "21": "BBBSSSSB", "22": "SBSSSSSS", "23": "BSBSBBSB", "24": "BSBSBSBB", "25": "BBSBBSSB", "26": "SBSBSSBB", "27": "SSBBBBSB", "28": "SBBBSBSB", "29": "SBSBSBSB", "30": "SSSBSBSS", "31": "SSSBBBBS", "32": "BBBBBBBS", "33": "BSSBSSBS", "34": "BBBSSBSB", "35": "BBSSBSSS", "36": "SSBBSBBB", "37": "BSBBSBSB", "38": "BSBBBSBB", "39": "SSSBBSSB", "40": "BBBSSSSB", "41": "SBSSBSSS", "42": "BBSBSBBB", "43": "BBSBBBSB", "44": "SSBBSSBB", "45": "SBBSBBSB", "46": "SSSBBSBS", "47": "SBBSBBBB", "48": "BSSSSSBB", "49": "BBBSSBBB", "50": "BSSBBBBS", "51": "BBSBSBBB", "52": "SSBBSSSS", "53": "SSBSBBSS", "54": "SBBBSSSS", "55": "SSSSSSSS", "56": "BBBSBBBS", "57": "BBBSSSBB", "58": "SBSBSSSB", "59": "BBSBSBBB", "60": "SBBSBBSB", "61": "SBBSBSSB", "62": "BBBBBBSS", "63": "SBSSBSBB", "64": "BBSSSSBB", "65": "BSBBBSBS", "66": "BSBSSBSB", "67": "BSSBSBSS", "68": "BBBBSBBS", "69": "BBSSSBSS", "70": "SSSBBSSB", "71": "BBBBSSBB", "72": "BSBBBSSB", "73": "BBBBBSBS", "74": "BBBSBSSB", "75": "SSBBBSBS", "76": "SSSSSBBS", "77": "SSBBBSBS", "78": "BBBBBBSS", "79": "BSBBBSSS", "80": "BBSSBBSS", "81": "BSSSBSBS", "82": "BBBSBSSB", "83": "BSSSSBSS", "84": "BBSBBSBB", "85": "SSBBBSBB", "86": "BBSBSSBB", "87": "BBSSBSSS", "88": "SSBSSBBS", "89": "BBSSBSBB", "90": "SBBSSSSS", "91": "SSBBSBSB", "92": "BSBBBBSB", "93": "BSSSBBBB", "94": "BSSBSBBS", "95": "SSSSSBSS", "96": "BSBSSSBB", "97": "SBSBBSSB", "98": "BBSBSSBB", "99": "BBSSSSBB" };

let rawInputs = JSON.parse(localStorage.getItem('rawInputs')) || [];
let activeTracks = JSON.parse(localStorage.getItem('activeTracks')) || [];
let historyLog = JSON.parse(localStorage.getItem('historyLog')) || [];
let lockedTrackId = localStorage.getItem('lockedTrackId') || null;

function saveData() {
    localStorage.setItem('rawInputs', JSON.stringify(rawInputs));
    localStorage.setItem('activeTracks', JSON.stringify(activeTracks));
    localStorage.setItem('historyLog', JSON.stringify(historyLog));
    localStorage.setItem('lockedTrackId', lockedTrackId);
}

function handleInput(num) {
    const bs = num >= 5 ? "B" : "S";
    activeTracks.forEach(t => { if (t.results.length < 8) t.results.push(bs === t.pattern[t.results.length] ? "‚úÖ" : "‚ùå"); });
    let lockCreated = false;
    if (lockedTrackId) {
        let locked = activeTracks.find(t => t.id == lockedTrackId);
        if (locked && (locked.results[locked.results.length-1] === "‚úÖ" || locked.results.length === 8)) {
            const p1 = rawInputs[rawInputs.length - 1];
            lockedTrackId = null;
            createTrack(p1, num, true);
            lockCreated = true;
        }
    }
    if (rawInputs.length > 0 && !lockCreated) createTrack(rawInputs[rawInputs.length - 1], num, false);
    rawInputs.push(num);
    for (let i = activeTracks.length - 1; i >= 0; i--) {
        if (activeTracks[i].results.length === 8) historyLog.unshift(activeTracks.splice(i, 1)[0]);
    }
    saveData();
    renderUI();
}

function createTrack(n1, n2, isLock) {
    const cat = n1.toString() + n2.toString();
    if (myPatterns[cat]) {
        let newT = { id: Date.now() + Math.random(), digit: cat, pattern: myPatterns[cat], results: [], wasLocked: isLock };
        activeTracks.push(newT);
        if (isLock || !lockedTrackId) lockedTrackId = newT.id;
    }
}

function renderUI() {
    const locked = activeTracks.find(t => t.id == lockedTrackId);
    const stepIdx = locked ? locked.results.length : -1;
    document.getElementById('predDisplay').innerText = (locked && locked.pattern[stepIdx]) ? locked.pattern[stepIdx] : "-";
    document.getElementById('statusLabel').innerText = locked ? `LOCKED: ${locked.digit}` : "WAITING...";

    const last5 = rawInputs.slice(-5);
    document.getElementById('recentDisplay').innerHTML = [0,1,2,3,4].map(i => {
        const val = last5[i] !== undefined ? last5[i] : "-";
        return `<div class="num-circle ${val !== "-" && i === last5.length-1 ? 'latest' : ''}">${val}</div>`;
    }).join('');

    for(let i=0; i<8; i++) {
        let el = document.getElementById(`step-${i}`);
        let res = locked ? locked.results[i] : "";
        el.style.background = res==='‚úÖ'?'var(--green)':(res==='‚ùå'?'var(--red)':'#111');
        el.innerText = res || (i+1);
    }

    document.getElementById('liveMonitor').innerHTML = activeTracks.map(t => {
        const isLock = t.id == lockedTrackId;
        const isUnl = t.wasLocked && !isLock;
        
        let allPotential = [...historyLog, ...activeTracks].filter(x => x.id !== t.id);
        let refSource = allPotential
            .filter(r => r.digit[0] === t.digit[0])
            .sort((a,b) => b.id - a.id)[0];

        // ·Äú·ÄÄ·Ä∫·Äõ·Äæ·Ä≠ Pos ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ Prediction (S/B) ·Äê·ÄÖ·Ä∫·Äú·ÄØ·Ä∂·Ä∏·Äê·Ää·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äõ·Äö·Ä∞·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
        const currentPos = t.results.length;
        const currentPred = t.pattern[currentPos] || '-';

        let layers = '';
        for(let pos=0; pos<8; pos++) {
            const currentRes = t.results[pos];
            const refRes = refSource ? refSource.results[pos] : null;
            let matchCol = 'transparent';
            if(currentRes && refRes) matchCol = (currentRes === refRes) ? 'var(--mint)' : 'var(--red)';

            layers += `
                <div class="cell-stack">
                    <div class="comp-dot" style="background:${matchCol}; box-shadow: ${matchCol!=='transparent' ? '0 0 4px '+matchCol : 'none'}"></div>
                    <div class="res-cell" style="color:${currentRes==='‚úÖ'?'var(--mint)':'var(--red)'}; background:rgba(255,255,255,0.03);">${currentRes||''}</div>
                    <div class="res-cell" style="opacity:0.4; color:${refRes==='‚úÖ'?'var(--mint)':'var(--red)'}; font-size:9px;">${refRes||''}</div>
                </div>`;
        }

        return `
        <div class="live-card ${isLock ? 'current-lock' : (isUnl ? 'unlocked-card' : '')}">
            <div class="live-info">
                <span>
                    <span class="status-tag">${isLock ? 'üîí' : 'A'}</span>${t.digit}
                    <span style="color:var(--silver); font-weight:normal; margin-left:4px;">L${currentPos + 1 > 8 ? 8 : currentPos + 1}</span>
                </span>
                <span style="font-size:16px; color:${currentPred==='B'?'var(--blue)':'#fff'}; background:rgba(255,255,255,0.1); padding:2px 8px; border-radius:4px;">
                    ${currentPred}
                </span>
            </div>
            <div class="three-layer-monitor">${layers}</div>
        </div>`;
    }).join('');

    document.getElementById('historyBody').innerHTML = historyLog.slice(0, 50).map((h, index) => {
        const icon = h.wasLocked ? '<span style="color:var(--gold)">üîí</span>' : 'üîì';
        return `<tr><td>${historyLog.length - index}</td><td>${icon} ${h.digit}</td><td>${h.results.join('')}</td><td style="color:${h.results.includes('‚úÖ')?'var(--green)':'var(--red)'}">${h.results.includes('‚úÖ')?'WIN':'LOSS'}</td></tr>`;
    }).join('');
}

function undoInput() {
    if (rawInputs.length === 0) return;
    rawInputs.pop();
    activeTracks.forEach(t => { if (t.results.length > 0) t.results.pop(); });
    activeTracks = activeTracks.filter(t => t.results.length > 0 || t.id == lockedTrackId);
    saveData();
    renderUI();
}

function copyHistory() {
    let text = "S/N | CAT | RESULT | STATUS\n";
    historyLog.forEach((h, i) => { text += `${historyLog.length - i} | ${h.digit} | ${h.results.join('')} | ${h.results.includes('‚úÖ') ? 'WIN' : 'LOSS'}\n`; });
    const el = document.createElement('textarea'); el.value = text; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el);
    alert("Copied!");
}

function resetData() { 
    if(confirm("RESET ALL?")) { localStorage.clear(); location.reload(); } 
}
renderUI();
</script>
</body>
</html>


